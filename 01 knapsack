import java.util.*;

class ReliefItem {
    String name;
    int weight;
    int utility;
    boolean perishable;

    ReliefItem(String name, int weight, int utility, boolean perishable) {
        this.name = name;
        this.weight = weight;
        this.utility = utility;
        this.perishable = perishable;
    }

    // Return utility per kilogram
    double valuePerKg() {
        return (double) utility / weight;
    }

    @Override
    public String toString() {
        return name + (perishable ? " (Perishable)" : "") +
               " | Weight: " + weight +
               " | Utility: " + utility +
               " | Value/kg: " + String.format("%.2f", valuePerKg());
    }
}

public class DisasterReliefResourceAllocation {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.println("=== Disaster Relief Resource Allocation System ===");

        System.out.print("Enter number of relief items: ");
        int n = sc.nextInt();

        System.out.print("Enter truck capacity (in kg): ");
        int W = sc.nextInt();

        ReliefItem[] items = new ReliefItem[n];

        for (int i = 0; i < n; i++) {
            System.out.println("\nEnter details for item " + (i + 1) + ":");

            System.out.print("Name: ");
            String name = sc.next(); // Use sc.nextLine() if you want names with spaces

            System.out.print("Weight (kg): ");
            int weight = sc.nextInt();

            System.out.print("Utility value: ");
            int utility = sc.nextInt();

            System.out.print("Is it perishable? (true/false): ");
            boolean perishable = sc.nextBoolean();

            // Priority boost for perishable items (+20%)
            if (perishable) {
                utility += (int) (0.2 * utility);
            }

            items[i] = new ReliefItem(name, weight, utility, perishable);
        }

        int choice;
        do {
            System.out.println("\n=== Choose Algorithm ===");
            System.out.println("1. Brute Force (Exhaustive Search)");
            System.out.println("2. Greedy Approximation (Fast)");
            System.out.println("3. Exit");
            System.out.print("Enter your choice: ");
            choice = sc.nextInt();

            switch (choice) {
                case 1:
                    System.out.println("\nUsing Brute Force Algorithm...");
                    int maxUtility = bruteForceKnapsack(items, n, W);
                    System.out.println("Maximum Utility (Brute Force): " + maxUtility);
                    break;

                case 2:
                    System.out.println("\nUsing Greedy Approximation Algorithm...");
                    greedyKnapsack(items, W);
                    System.out.println("\n(Note: Greedy is faster but not always optimal for 0/1 Knapsack.)");
                    break;

                case 3:
                    System.out.println("\nExiting program. Thank you!");
                    break;

                default:
                    System.out.println("Invalid choice! Try again.");
            }

        } while (choice != 3);

        sc.close();
    }

    // ---------------- Brute Force ----------------
    static int bruteForceKnapsack(ReliefItem[] items, int n, int W) {
        return bruteForceRecursive(items, n - 1, W);
    }

    static int bruteForceRecursive(ReliefItem[] items, int i, int remainingWeight) {
        if (i < 0 || remainingWeight == 0)
            return 0;

        if (items[i].weight > remainingWeight)
            return bruteForceRecursive(items, i - 1, remainingWeight);

        int exclude = bruteForceRecursive(items, i - 1, remainingWeight);
        int include = items[i].utility + bruteForceRecursive(items, i - 1, remainingWeight - items[i].weight);

        return Math.max(include, exclude);
    }

    // ---------------- Greedy (Approximation) ----------------
    static void greedyKnapsack(ReliefItem[] items, int W) {
        // Create a copy so original order remains unchanged
        ReliefItem[] sortedItems = Arrays.copyOf(items, items.length);

        // Sort by descending value per kg
        Arrays.sort(sortedItems, (a, b) -> Double.compare(b.valuePerKg(), a.valuePerKg()));

        int totalWeight = 0;
        int totalUtility = 0;

        System.out.println("\nSelected Items (Greedy Approach):");
        for (ReliefItem item : sortedItems) {
            if (totalWeight + item.weight <= W) {
                totalWeight += item.weight;
                totalUtility += item.utility;
                System.out.println("  - " + item.toString());
            }
        }

        System.out.println("\nApprox. Total Utility: " + totalUtility);
        System.out.println("Total Weight: " + totalWeight + " / " + W + " kg");
    }
}
